<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard</title>

<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
body{
font-family:'Inter',sans-serif;
background:linear-gradient(135deg,#0f172a,#020617);
color:#e5e7eb;
}
.card{
background:#020617;
border-radius:16px;
padding:16px;
box-shadow:0 10px 30px rgba(0,0,0,.6);
}
table{
background:#020617;
}
thead{
background:#1e293b;
}
tbody tr:hover{
background:#334155;
}
.flag-btn{
min-width:180px;
font-weight:600;
padding:10px 16px;
border-radius:12px;
transition:.25s;
}
.flag-btn:hover{
transform:translateY(-3px);
box-shadow:0 6px 15px rgba(0,0,0,.5);
}
img{
width:60px;
height:60px;
object-fit:cover;
border-radius:10px;
margin:auto;
}
</style>
</head>

<body class="p-4 sm:p-6">

<div class="flex flex-col sm:flex-row justify-between items-center gap-4 mb-6">
<h1 class="text-3xl font-bold text-cyan-400">Admin Dashboard</h1>
<div class="flex gap-2">
<a href="{{ url_for('home') }}" class="bg-slate-600 px-4 py-2 rounded-lg hover:bg-slate-700">Accueil</a>
<a href="{{ url_for('admin_logout') }}" class="bg-red-600 px-4 py-2 rounded-lg hover:bg-red-700">Déconnexion</a>
</div>
</div>

<h2 class="text-2xl font-semibold mb-4 text-cyan-400">Gestion des sections</h2>
<div class="flex flex-wrap gap-4 mb-8">

<form method="POST">
<input type="hidden" name="flag_key" value="COMMERCE_ACTIVE">
<button class="flag-btn text-white {{ 'bg-green-600' if flags['COMMERCE_ACTIVE'] else 'bg-red-600' }}">
Commerce : {{ 'Actif' if flags['COMMERCE_ACTIVE'] else 'Bloqué' }}
</button>
</form>

<form method="POST">
<input type="hidden" name="flag_key" value="INVESTISSEMENT_ACTIVE">
<button class="flag-btn text-white {{ 'bg-blue-600' if flags['INVESTISSEMENT_ACTIVE'] else 'bg-red-600' }}">
Investissement : {{ 'Actif' if flags['INVESTISSEMENT_ACTIVE'] else 'Bloqué' }}
</button>
</form>

<form method="POST">
<input type="hidden" name="flag_key" value="RECRUTEMENT_ACTIVE">
<button class="flag-btn text-white {{ 'bg-purple-600' if flags['RECRUTEMENT_ACTIVE'] else 'bg-red-600' }}">
Recrutement : {{ 'Actif' if flags['RECRUTEMENT_ACTIVE'] else 'Bloqué' }}
</button>
</form>

</div>

<div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8">
<div class="card text-center">
<p class="text-sm text-gray-400">Articles électroménagers</p>
<p class="text-3xl font-bold text-cyan-400">{{ products_foyer|length }}</p>
</div>
<div class="card text-center">
<p class="text-sm text-gray-400">Produits du marché</p>
<p class="text-3xl font-bold text-green-400">{{ products_marche|length }}</p>
</div>
<div class="card text-center">
<p class="text-sm text-gray-400">Total</p>
<p class="text-3xl font-bold text-yellow-400">{{ products_foyer|length + products_marche|length }}</p>
</div>
</div>

<div class="card mb-8">
<form method="POST" enctype="multipart/form-data" class="flex flex-col sm:flex-row gap-3">
<input type="text" name="designation" placeholder="Nom du produit" required class="flex-1 p-2 rounded bg-slate-800 border border-slate-600">
<input type="number" name="price" step="0.01" placeholder="Prix (F)" required class="w-full sm:w-32 p-2 rounded bg-slate-800 border border-slate-600">
<select name="category" required class="p-2 rounded bg-slate-800 border border-slate-600">
<option value="foyer">Articles électroménagers</option>
<option value="marche">Produits du marché</option>
</select>
<input type="file" name="image" accept="image/*" class="p-2 text-sm">
<label class="flex items-center gap-2 text-sm">
<input type="checkbox" name="is_footer"> Pied de liste
</label>
<button class="bg-green-600 px-4 py-2 rounded-lg hover:bg-green-700">Ajouter</button>
</form>
</div>

<h2 class="text-xl font-bold mb-3 text-cyan-400">Articles électroménagers</h2>
<div class="overflow-x-auto mb-8">
<table class="min-w-full rounded-lg overflow-hidden">
<thead>
<tr>
<th class="p-3">ID</th>
<th class="p-3">Nom</th>
<th class="p-3">Prix</th>
<th class="p-3">Image</th>
<th class="p-3">Footer</th>
<th class="p-3">Action</th>
</tr>
</thead>
<tbody>
{% for p in products_foyer %}
<tr>
<td class="p-3">{{ p.id }}</td>
<td class="p-3">{{ p.designation }}</td>
<td class="p-3">{{ "%.2f"|format(p.price) }} F</td>
<td class="p-3 text-center">
{% if p.image %}
<img src="{{ p.image }}">
{% else %}
<span class="text-gray-500 text-sm">Aucune</span>
{% endif %}
</td>
<td class="p-3 text-center">{{ 'Oui' if p.is_footer else 'Non' }}</td>
<td class="p-3 text-center">
<form method="POST">
<input type="hidden" name="delete_id" value="{{ p.id }}">
<button class="bg-red-600 px-3 py-1 rounded hover:bg-red-700">Supprimer</button>
</form>
</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>

<h2 class="text-xl font-bold mb-3 text-green-400">Produits du marché</h2>
<div class="overflow-x-auto">
<table class="min-w-full rounded-lg overflow-hidden">
<thead>
<tr>
<th class="p-3">ID</th>
<th class="p-3">Nom</th>
<th class="p-3">Prix</th>
<th class="p-3">Image</th>
<th class="p-3">Footer</th>
<th class="p-3">Action</th>
</tr>
</thead>
<tbody>
{% for p in products_marche %}
<tr>
<td class="p-3">{{ p.id }}</td>
<td class="p-3">{{ p.designation }}</td>
<td class="p-3">{{ "%.2f"|format(p.price) }} F</td>
<td class="p-3 text-center">
{% if p.image %}
<img src="{{ p.image }}">
{% else %}
<span class="text-gray-500 text-sm">Aucune</span>
{% endif %}
</td>
<td class="p-3 text-center">{{ 'Oui' if p.is_footer else 'Non' }}</td>
<td class="p-3 text-center">
<form method="POST">
<input type="hidden" name="delete_id" value="{{ p.id }}">
<button class="bg-red-600 px-3 py-1 rounded hover:bg-red-700">Supprimer</button>
</form>
</td>
</tr>
{% endfor %}
</tbody>
</table>
</div>

</body>
</html>
